"use strict";!function n(i,s,o){function a(t,e){if(!s[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=s[t]={exports:{}},i[t][0].call(r.exports,function(e){return a(i[t][1][e]||e)},r,r.exports,n,i,s,o)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,t,r){function n(e){var i,n,s,o,a,l,c,t;function u(){var e,t,r;s&&(e=s&&i.length?(e=(s.parentElement||s).getBoundingClientRect(),t=i[0].getBoundingClientRect(),r=i[i.length-1].getBoundingClientRect(),t=t.left-e.left,r=r.right-e.left,{start:t,width:Math.max(r-t,0)}):null)&&(s.style.width=e.width+"px",o)&&(o.style.width="100%")}function d(e){var t,r,n;u(),t=e,a&&s&&(t=i[t])&&(t=t.getBoundingClientRect(),r=s.getBoundingClientRect(),n=t.width,t=t.left-r.left,a.style.width=n+"px",a.style.transform="translateX("+t+"px)"),c=e}function r(r){i.forEach(function(e,t){t=t===r;e.classList.toggle("is-active",t),e.setAttribute("aria-selected",t?"true":"false")}),n.forEach(function(e,t){e.classList.toggle("is-active",t===r)}),l[r]&&l[r].update&&l[r].update(),d(r)}function p(){d(c)}function f(e){var t,r,n,i=e.querySelector(".s-product-tabs__swiper");function s(){var e;t&&r&&(e=(n.slides?n.slides.length:0)<=("number"==typeof n.params.slidesPerView?n.params.slidesPerView:parseFloat(n.params.slidesPerView)||1),t.classList.toggle("is-hidden",e||n.isBeginning),r.classList.toggle("is-hidden",e||n.isEnd))}i&&!i._swiperInitialized&&"undefined"!=typeof Swiper&&(t=e.querySelector(".s-product-tabs__arrow--prev"),r=e.querySelector(".s-product-tabs__arrow--next"),(n=new Swiper(i,{loop:!1,spaceBetween:12,navigation:{nextEl:r,prevEl:t},breakpoints:{0:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4,spaceBetween:28}}})).on("slideChange",s),n.on("resize",s),n.on("update",s),i._swiperInitialized=!0,i=parseInt(e.getAttribute("data-tab-index"),10)||0,l[i]=n,s())}e&&(i=Array.prototype.slice.call(e.querySelectorAll(".s-product-tabs__tab")),n=Array.prototype.slice.call(e.querySelectorAll(".s-product-tabs__panel")),e.querySelector(".s-product-tabs__tabs"),s=e.querySelector(".s-product-tabs__tab-bar"),o=e.querySelector(".s-product-tabs__tab-bar-track"),a=e.querySelector(".s-product-tabs__tab-bar-thumb"),i.length)&&n.length&&(l={},c=0,t=null,i.forEach(function(e,t){e.addEventListener("click",function(){r(t),f(n[t])})}),r(0),f(n[0]),d(0),window.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(p,150)}),window.addEventListener("load",function(){d(c)}))}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("s-product-tabs.s-product-tabs").forEach(function(e){n(e)})})},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2VjdGlvbi1wcm9kdWN0LXRhYnMuanMiLCJzZWN0aW9uLXByb2R1Y3QtdGFicy5qcyJdLCJuYW1lcyI6WyJyIiwiZSIsIm4iLCJ0IiwibyIsImkiLCJmIiwiYyIsInJlcXVpcmUiLCJ1IiwiYSIsIkVycm9yIiwiY29kZSIsInAiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJpbml0UHJvZHVjdFRhYnMiLCJyb290IiwidGFicyIsInBhbmVscyIsInRhYkJhciIsInRhYkJhclRyYWNrIiwidGFiQmFyVGh1bWIiLCJzd2lwZXJzIiwiYWN0aXZlSW5kZXgiLCJyZXNpemVUaW1lciIsInVwZGF0ZUJhckxheW91dCIsIndyYXBwZXJSZWN0Iiwic3RhcnQiLCJlbmQiLCJtZXRyaWNzIiwicGFyZW50RWxlbWVudCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImZpcnN0UmVjdCIsImxhc3RSZWN0IiwibGVmdCIsInJpZ2h0Iiwid2lkdGgiLCJNYXRoIiwibWF4Iiwic3R5bGUiLCJ1cGRhdGVUYWJCYXIiLCJpbmRleCIsImJhclJlY3QiLCJ0aHVtYldpZHRoIiwiYWN0aXZlVGFiIiwidGFiUmVjdCIsInRodW1iT2Zmc2V0IiwidHJhbnNmb3JtIiwiYWN0aXZhdGVUYWIiLCJmb3JFYWNoIiwidGFiIiwiaXNBY3RpdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzZXRBdHRyaWJ1dGUiLCJwYW5lbCIsInVwZGF0ZSIsImhhbmRsZVJlc2l6ZSIsImluaXRTd2lwZXJGb3JQYW5lbCIsInByZXZCdXR0b24iLCJuZXh0QnV0dG9uIiwic3dpcGVyIiwic3dpcGVyRWwiLCJxdWVyeVNlbGVjdG9yIiwidXBkYXRlTmF2U3RhdGUiLCJoaWRlQWxsIiwic2xpZGVzIiwicGFyYW1zIiwic2xpZGVzUGVyVmlldyIsInBhcnNlRmxvYXQiLCJpc0JlZ2lubmluZyIsImlzRW5kIiwiX3N3aXBlckluaXRpYWxpemVkIiwiU3dpcGVyIiwibG9vcCIsInNwYWNlQmV0d2VlbiIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJicmVha3BvaW50cyIsIjAiLCI3NjgiLCIxMDI0Iiwib24iLCJ0YWJJbmRleCIsInBhcnNlSW50IiwiZ2V0QXR0cmlidXRlIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImRvY3VtZW50Iiwic2VjdGlvbiJdLCJtYXBwaW5ncyI6ImFBQUEsQ0FBQSxTQUFBQSxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQUEsR0FBQSxDQUFBSixFQUFBRyxHQUFBLENBQUEsR0FBQSxDQUFBSixFQUFBSSxHQUFBLENBQUEsSUFBQUUsRUFBQSxZQUFBLE9BQUFDLFNBQUFBLFFBQUEsR0FBQSxDQUFBRixHQUFBQyxFQUFBLE9BQUFBLEVBQUFGLEVBQUEsQ0FBQSxDQUFBLEVBQUEsR0FBQUksRUFBQSxPQUFBQSxFQUFBSixFQUFBLENBQUEsQ0FBQSxFQUFBLE1BQUFLLEVBQUEsSUFBQUMsTUFBQSx1QkFBQU4sRUFBQSxHQUFBLEdBQUFPLEtBQUEsbUJBQUFGLENBQUEsQ0FBQUcsRUFBQVgsRUFBQUcsR0FBQSxDQUFBUyxRQUFBLEVBQUEsRUFBQWIsRUFBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsT0FBQUksRUFBQUgsRUFBQUksR0FBQSxHQUFBTCxJQUFBQSxDQUFBLENBQUEsRUFBQWEsRUFBQUEsRUFBQUMsUUFBQWQsRUFBQUMsRUFBQUMsRUFBQUMsQ0FBQSxDQUFBLENBQUEsT0FBQUQsRUFBQUcsR0FBQVMsT0FBQSxDQUFBLElBQUEsSUFBQUwsRUFBQSxZQUFBLE9BQUFELFNBQUFBLFFBQUFILEVBQUEsRUFBQUEsRUFBQUYsRUFBQWEsT0FBQVgsQ0FBQSxHQUFBRCxF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QUFBLENBQ0EsQ0FBQSxDQUNBLENBQUEsQ0NHQSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSIsImZpbGUiOiJzZWN0aW9uLXByb2R1Y3QtdGFicy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJcbmZ1bmN0aW9uIGluaXRQcm9kdWN0VGFicyhyb290KSB7XG4gIGlmICghcm9vdCkgcmV0dXJuO1xuXG4gIHZhciB0YWJzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoXG4gICAgcm9vdC5xdWVyeVNlbGVjdG9yQWxsKFwiLnMtcHJvZHVjdC10YWJzX190YWJcIilcbiAgKTtcbiAgdmFyIHBhbmVscyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKFxuICAgIHJvb3QucXVlcnlTZWxlY3RvckFsbChcIi5zLXByb2R1Y3QtdGFic19fcGFuZWxcIilcbiAgKTtcbiAgdmFyIHRhYnNDb250YWluZXIgPSByb290LnF1ZXJ5U2VsZWN0b3IoXCIucy1wcm9kdWN0LXRhYnNfX3RhYnNcIik7XG4gIHZhciB0YWJCYXIgPSByb290LnF1ZXJ5U2VsZWN0b3IoXCIucy1wcm9kdWN0LXRhYnNfX3RhYi1iYXJcIik7XG4gIHZhciB0YWJCYXJUcmFjayA9IHJvb3QucXVlcnlTZWxlY3RvcihcIi5zLXByb2R1Y3QtdGFic19fdGFiLWJhci10cmFja1wiKTtcbiAgdmFyIHRhYkJhclRodW1iID0gcm9vdC5xdWVyeVNlbGVjdG9yKFwiLnMtcHJvZHVjdC10YWJzX190YWItYmFyLXRodW1iXCIpO1xuXG4gIGlmICghdGFicy5sZW5ndGggfHwgIXBhbmVscy5sZW5ndGgpIHJldHVybjtcblxuICB2YXIgc3dpcGVycyA9IHt9O1xuICB2YXIgYWN0aXZlSW5kZXggPSAwO1xuXG4gIGZ1bmN0aW9uIGdldFRhYnNNZXRyaWNzKCkge1xuICAgIGlmICghdGFiQmFyIHx8ICF0YWJzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgdmFyIHdyYXBwZXJSZWN0ID0gdGFiQmFyLnBhcmVudEVsZW1lbnRcbiAgICAgID8gdGFiQmFyLnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIDogdGFiQmFyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBmaXJzdFJlY3QgPSB0YWJzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBsYXN0UmVjdCA9IHRhYnNbdGFicy5sZW5ndGggLSAxXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIHZhciBzdGFydCA9IGZpcnN0UmVjdC5sZWZ0IC0gd3JhcHBlclJlY3QubGVmdDtcbiAgICB2YXIgZW5kID0gbGFzdFJlY3QucmlnaHQgLSB3cmFwcGVyUmVjdC5sZWZ0O1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogc3RhcnQsXG4gICAgICB3aWR0aDogTWF0aC5tYXgoZW5kIC0gc3RhcnQsIDApLFxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVCYXJMYXlvdXQoKSB7XG4gICAgaWYgKCF0YWJCYXIpIHJldHVybjtcbiAgICB2YXIgbWV0cmljcyA9IGdldFRhYnNNZXRyaWNzKCk7XG4gICAgaWYgKCFtZXRyaWNzKSByZXR1cm47XG5cbiAgICB0YWJCYXIuc3R5bGUud2lkdGggPSBtZXRyaWNzLndpZHRoICsgXCJweFwiO1xuXG4gICAgaWYgKHRhYkJhclRyYWNrKSB7XG4gICAgICB0YWJCYXJUcmFjay5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVUaHVtYihpbmRleCkge1xuICAgIGlmICghdGFiQmFyVGh1bWIgfHwgIXRhYkJhcikgcmV0dXJuO1xuICAgIHZhciBhY3RpdmVUYWIgPSB0YWJzW2luZGV4XTtcbiAgICBpZiAoIWFjdGl2ZVRhYikgcmV0dXJuO1xuXG4gICAgdmFyIHRhYlJlY3QgPSBhY3RpdmVUYWIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIGJhclJlY3QgPSB0YWJCYXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIHRodW1iV2lkdGggPSB0YWJSZWN0LndpZHRoO1xuICAgIHZhciB0aHVtYk9mZnNldCA9IHRhYlJlY3QubGVmdCAtIGJhclJlY3QubGVmdDtcblxuICAgIHRhYkJhclRodW1iLnN0eWxlLndpZHRoID0gdGh1bWJXaWR0aCArIFwicHhcIjtcbiAgICB0YWJCYXJUaHVtYi5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoXCIgKyB0aHVtYk9mZnNldCArIFwicHgpXCI7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVUYWJCYXIoaW5kZXgpIHtcbiAgICB1cGRhdGVCYXJMYXlvdXQoKTtcbiAgICBtb3ZlVGh1bWIoaW5kZXgpO1xuICAgIGFjdGl2ZUluZGV4ID0gaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBhY3RpdmF0ZVRhYihpbmRleCkge1xuICAgIHRhYnMuZm9yRWFjaChmdW5jdGlvbiAodGFiLCBpKSB7XG4gICAgICB2YXIgaXNBY3RpdmUgPSBpID09PSBpbmRleDtcbiAgICAgIHRhYi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtYWN0aXZlXCIsIGlzQWN0aXZlKTtcbiAgICAgIHRhYi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsIGlzQWN0aXZlID8gXCJ0cnVlXCIgOiBcImZhbHNlXCIpO1xuICAgIH0pO1xuXG4gICAgcGFuZWxzLmZvckVhY2goZnVuY3Rpb24gKHBhbmVsLCBpKSB7XG4gICAgICBwYW5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtYWN0aXZlXCIsIGkgPT09IGluZGV4KTtcbiAgICB9KTtcblxuICAgIGlmIChzd2lwZXJzW2luZGV4XSkge1xuICAgICAgc3dpcGVyc1tpbmRleF0udXBkYXRlICYmIHN3aXBlcnNbaW5kZXhdLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIHVwZGF0ZVRhYkJhcihpbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVSZXNpemUoKSB7XG4gICAgdXBkYXRlVGFiQmFyKGFjdGl2ZUluZGV4KTtcbiAgfVxuXG4gIHZhciByZXNpemVUaW1lciA9IG51bGw7XG5cbiAgZnVuY3Rpb24gaW5pdFN3aXBlckZvclBhbmVsKHBhbmVsKSB7XG4gICAgdmFyIHN3aXBlckVsID0gcGFuZWwucXVlcnlTZWxlY3RvcihcIi5zLXByb2R1Y3QtdGFic19fc3dpcGVyXCIpO1xuICAgIGlmICghc3dpcGVyRWwgfHwgc3dpcGVyRWwuX3N3aXBlckluaXRpYWxpemVkKSByZXR1cm47XG5cbiAgICBpZiAodHlwZW9mIFN3aXBlciA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXG4gICAgdmFyIHByZXZCdXR0b24gPSBwYW5lbC5xdWVyeVNlbGVjdG9yKFwiLnMtcHJvZHVjdC10YWJzX19hcnJvdy0tcHJldlwiKTtcbiAgICB2YXIgbmV4dEJ1dHRvbiA9IHBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIucy1wcm9kdWN0LXRhYnNfX2Fycm93LS1uZXh0XCIpO1xuXG4gICAgdmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoc3dpcGVyRWwsIHtcbiAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgc3BhY2VCZXR3ZWVuOiAxMixcbiAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiBuZXh0QnV0dG9uLFxuICAgICAgICBwcmV2RWw6IHByZXZCdXR0b24sXG4gICAgICB9LFxuICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgMDoge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICAgIH0sXG4gICAgICAgIDc2ODoge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXG4gICAgICAgIH0sXG4gICAgICAgIDEwMjQ6IHtcbiAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxuICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjhcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVOYXZTdGF0ZSgpIHtcbiAgICAgIGlmICghcHJldkJ1dHRvbiB8fCAhbmV4dEJ1dHRvbikgcmV0dXJuO1xuICAgICAgdmFyIHRvdGFsU2xpZGVzID0gc3dpcGVyLnNsaWRlcyA/IHN3aXBlci5zbGlkZXMubGVuZ3RoIDogMDtcbiAgICAgIHZhciBwZXJWaWV3ID1cbiAgICAgICAgdHlwZW9mIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gXCJudW1iZXJcIlxuICAgICAgICAgID8gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3XG4gICAgICAgICAgOiBwYXJzZUZsb2F0KHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldykgfHwgMTtcblxuICAgICAgdmFyIGhpZGVBbGwgPSB0b3RhbFNsaWRlcyA8PSBwZXJWaWV3O1xuICAgICAgcHJldkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtaGlkZGVuXCIsIGhpZGVBbGwgfHwgc3dpcGVyLmlzQmVnaW5uaW5nKTtcbiAgICAgIG5leHRCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImlzLWhpZGRlblwiLCBoaWRlQWxsIHx8IHN3aXBlci5pc0VuZCk7XG4gICAgfVxuXG4gICAgc3dpcGVyLm9uKFwic2xpZGVDaGFuZ2VcIiwgdXBkYXRlTmF2U3RhdGUpO1xuICAgIHN3aXBlci5vbihcInJlc2l6ZVwiLCB1cGRhdGVOYXZTdGF0ZSk7XG4gICAgc3dpcGVyLm9uKFwidXBkYXRlXCIsIHVwZGF0ZU5hdlN0YXRlKTtcblxuICAgIHN3aXBlckVsLl9zd2lwZXJJbml0aWFsaXplZCA9IHRydWU7XG4gICAgdmFyIHRhYkluZGV4ID0gcGFyc2VJbnQocGFuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS10YWItaW5kZXhcIiksIDEwKSB8fCAwO1xuICAgIHN3aXBlcnNbdGFiSW5kZXhdID0gc3dpcGVyO1xuICAgIHVwZGF0ZU5hdlN0YXRlKCk7XG4gIH1cblxuICB0YWJzLmZvckVhY2goZnVuY3Rpb24gKHRhYiwgaW5kZXgpIHtcbiAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFjdGl2YXRlVGFiKGluZGV4KTtcbiAgICAgIGluaXRTd2lwZXJGb3JQYW5lbChwYW5lbHNbaW5kZXhdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gSW5pdGlhbGl6ZSBmaXJzdCB0YWIgYW5kIGl0cyBzd2lwZXJcbiAgYWN0aXZhdGVUYWIoMCk7XG4gIGluaXRTd2lwZXJGb3JQYW5lbChwYW5lbHNbMF0pO1xuICB1cGRhdGVUYWJCYXIoMCk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lcik7XG4gICAgcmVzaXplVGltZXIgPSBzZXRUaW1lb3V0KGhhbmRsZVJlc2l6ZSwgMTUwKTtcbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICB1cGRhdGVUYWJCYXIoYWN0aXZlSW5kZXgpO1xuICB9KTtcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICB2YXIgc2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwicy1wcm9kdWN0LXRhYnMucy1wcm9kdWN0LXRhYnNcIik7XG4gIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKHNlY3Rpb24pIHtcbiAgICBpbml0UHJvZHVjdFRhYnMoc2VjdGlvbik7XG4gIH0pO1xufSk7XG4iLCIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblxuZnVuY3Rpb24gaW5pdFByb2R1Y3RUYWJzKHJvb3QpIHtcbiAgaWYgKCFyb290KSByZXR1cm47XG5cbiAgdmFyIHRhYnMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChcbiAgICByb290LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucy1wcm9kdWN0LXRhYnNfX3RhYlwiKVxuICApO1xuICB2YXIgcGFuZWxzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoXG4gICAgcm9vdC5xdWVyeVNlbGVjdG9yQWxsKFwiLnMtcHJvZHVjdC10YWJzX19wYW5lbFwiKVxuICApO1xuICB2YXIgdGFic0NvbnRhaW5lciA9IHJvb3QucXVlcnlTZWxlY3RvcihcIi5zLXByb2R1Y3QtdGFic19fdGFic1wiKTtcbiAgdmFyIHRhYkJhciA9IHJvb3QucXVlcnlTZWxlY3RvcihcIi5zLXByb2R1Y3QtdGFic19fdGFiLWJhclwiKTtcbiAgdmFyIHRhYkJhclRyYWNrID0gcm9vdC5xdWVyeVNlbGVjdG9yKFwiLnMtcHJvZHVjdC10YWJzX190YWItYmFyLXRyYWNrXCIpO1xuICB2YXIgdGFiQmFyVGh1bWIgPSByb290LnF1ZXJ5U2VsZWN0b3IoXCIucy1wcm9kdWN0LXRhYnNfX3RhYi1iYXItdGh1bWJcIik7XG5cbiAgaWYgKCF0YWJzLmxlbmd0aCB8fCAhcGFuZWxzLmxlbmd0aCkgcmV0dXJuO1xuXG4gIHZhciBzd2lwZXJzID0ge307XG4gIHZhciBhY3RpdmVJbmRleCA9IDA7XG5cbiAgZnVuY3Rpb24gZ2V0VGFic01ldHJpY3MoKSB7XG4gICAgaWYgKCF0YWJCYXIgfHwgIXRhYnMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgd3JhcHBlclJlY3QgPSB0YWJCYXIucGFyZW50RWxlbWVudFxuICAgICAgPyB0YWJCYXIucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgOiB0YWJCYXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIGZpcnN0UmVjdCA9IHRhYnNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIGxhc3RSZWN0ID0gdGFic1t0YWJzLmxlbmd0aCAtIDFdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgdmFyIHN0YXJ0ID0gZmlyc3RSZWN0LmxlZnQgLSB3cmFwcGVyUmVjdC5sZWZ0O1xuICAgIHZhciBlbmQgPSBsYXN0UmVjdC5yaWdodCAtIHdyYXBwZXJSZWN0LmxlZnQ7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgIHdpZHRoOiBNYXRoLm1heChlbmQgLSBzdGFydCwgMCksXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUJhckxheW91dCgpIHtcbiAgICBpZiAoIXRhYkJhcikgcmV0dXJuO1xuICAgIHZhciBtZXRyaWNzID0gZ2V0VGFic01ldHJpY3MoKTtcbiAgICBpZiAoIW1ldHJpY3MpIHJldHVybjtcblxuICAgIHRhYkJhci5zdHlsZS53aWR0aCA9IG1ldHJpY3Mud2lkdGggKyBcInB4XCI7XG5cbiAgICBpZiAodGFiQmFyVHJhY2spIHtcbiAgICAgIHRhYkJhclRyYWNrLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZVRodW1iKGluZGV4KSB7XG4gICAgaWYgKCF0YWJCYXJUaHVtYiB8fCAhdGFiQmFyKSByZXR1cm47XG4gICAgdmFyIGFjdGl2ZVRhYiA9IHRhYnNbaW5kZXhdO1xuICAgIGlmICghYWN0aXZlVGFiKSByZXR1cm47XG5cbiAgICB2YXIgdGFiUmVjdCA9IGFjdGl2ZVRhYi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgYmFyUmVjdCA9IHRhYkJhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgdGh1bWJXaWR0aCA9IHRhYlJlY3Qud2lkdGg7XG4gICAgdmFyIHRodW1iT2Zmc2V0ID0gdGFiUmVjdC5sZWZ0IC0gYmFyUmVjdC5sZWZ0O1xuXG4gICAgdGFiQmFyVGh1bWIuc3R5bGUud2lkdGggPSB0aHVtYldpZHRoICsgXCJweFwiO1xuICAgIHRhYkJhclRodW1iLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWChcIiArIHRodW1iT2Zmc2V0ICsgXCJweClcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVRhYkJhcihpbmRleCkge1xuICAgIHVwZGF0ZUJhckxheW91dCgpO1xuICAgIG1vdmVUaHVtYihpbmRleCk7XG4gICAgYWN0aXZlSW5kZXggPSBpbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFjdGl2YXRlVGFiKGluZGV4KSB7XG4gICAgdGFicy5mb3JFYWNoKGZ1bmN0aW9uICh0YWIsIGkpIHtcbiAgICAgIHZhciBpc0FjdGl2ZSA9IGkgPT09IGluZGV4O1xuICAgICAgdGFiLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1hY3RpdmVcIiwgaXNBY3RpdmUpO1xuICAgICAgdGFiLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgaXNBY3RpdmUgPyBcInRydWVcIiA6IFwiZmFsc2VcIik7XG4gICAgfSk7XG5cbiAgICBwYW5lbHMuZm9yRWFjaChmdW5jdGlvbiAocGFuZWwsIGkpIHtcbiAgICAgIHBhbmVsLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1hY3RpdmVcIiwgaSA9PT0gaW5kZXgpO1xuICAgIH0pO1xuXG4gICAgaWYgKHN3aXBlcnNbaW5kZXhdKSB7XG4gICAgICBzd2lwZXJzW2luZGV4XS51cGRhdGUgJiYgc3dpcGVyc1tpbmRleF0udXBkYXRlKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlVGFiQmFyKGluZGV4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVJlc2l6ZSgpIHtcbiAgICB1cGRhdGVUYWJCYXIoYWN0aXZlSW5kZXgpO1xuICB9XG5cbiAgdmFyIHJlc2l6ZVRpbWVyID0gbnVsbDtcblxuICBmdW5jdGlvbiBpbml0U3dpcGVyRm9yUGFuZWwocGFuZWwpIHtcbiAgICB2YXIgc3dpcGVyRWwgPSBwYW5lbC5xdWVyeVNlbGVjdG9yKFwiLnMtcHJvZHVjdC10YWJzX19zd2lwZXJcIik7XG4gICAgaWYgKCFzd2lwZXJFbCB8fCBzd2lwZXJFbC5fc3dpcGVySW5pdGlhbGl6ZWQpIHJldHVybjtcblxuICAgIGlmICh0eXBlb2YgU3dpcGVyID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG5cbiAgICB2YXIgcHJldkJ1dHRvbiA9IHBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIucy1wcm9kdWN0LXRhYnNfX2Fycm93LS1wcmV2XCIpO1xuICAgIHZhciBuZXh0QnV0dG9uID0gcGFuZWwucXVlcnlTZWxlY3RvcihcIi5zLXByb2R1Y3QtdGFic19fYXJyb3ctLW5leHRcIik7XG5cbiAgICB2YXIgc3dpcGVyID0gbmV3IFN3aXBlcihzd2lwZXJFbCwge1xuICAgICAgbG9vcDogZmFsc2UsXG4gICAgICBzcGFjZUJldHdlZW46IDEyLFxuICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICBuZXh0RWw6IG5leHRCdXR0b24sXG4gICAgICAgIHByZXZFbDogcHJldkJ1dHRvbixcbiAgICAgIH0sXG4gICAgICBicmVha3BvaW50czoge1xuICAgICAgICAwOiB7XG4gICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcbiAgICAgICAgfSxcbiAgICAgICAgNzY4OiB7XG4gICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcbiAgICAgICAgfSxcbiAgICAgICAgMTAyNDoge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXG4gICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyOFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZU5hdlN0YXRlKCkge1xuICAgICAgaWYgKCFwcmV2QnV0dG9uIHx8ICFuZXh0QnV0dG9uKSByZXR1cm47XG4gICAgICB2YXIgdG90YWxTbGlkZXMgPSBzd2lwZXIuc2xpZGVzID8gc3dpcGVyLnNsaWRlcy5sZW5ndGggOiAwO1xuICAgICAgdmFyIHBlclZpZXcgPVxuICAgICAgICB0eXBlb2Ygc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSBcIm51bWJlclwiXG4gICAgICAgICAgPyBzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXdcbiAgICAgICAgICA6IHBhcnNlRmxvYXQoc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3KSB8fCAxO1xuXG4gICAgICB2YXIgaGlkZUFsbCA9IHRvdGFsU2xpZGVzIDw9IHBlclZpZXc7XG4gICAgICBwcmV2QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1oaWRkZW5cIiwgaGlkZUFsbCB8fCBzd2lwZXIuaXNCZWdpbm5pbmcpO1xuICAgICAgbmV4dEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtaGlkZGVuXCIsIGhpZGVBbGwgfHwgc3dpcGVyLmlzRW5kKTtcbiAgICB9XG5cbiAgICBzd2lwZXIub24oXCJzbGlkZUNoYW5nZVwiLCB1cGRhdGVOYXZTdGF0ZSk7XG4gICAgc3dpcGVyLm9uKFwicmVzaXplXCIsIHVwZGF0ZU5hdlN0YXRlKTtcbiAgICBzd2lwZXIub24oXCJ1cGRhdGVcIiwgdXBkYXRlTmF2U3RhdGUpO1xuXG4gICAgc3dpcGVyRWwuX3N3aXBlckluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB2YXIgdGFiSW5kZXggPSBwYXJzZUludChwYW5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRhYi1pbmRleFwiKSwgMTApIHx8IDA7XG4gICAgc3dpcGVyc1t0YWJJbmRleF0gPSBzd2lwZXI7XG4gICAgdXBkYXRlTmF2U3RhdGUoKTtcbiAgfVxuXG4gIHRhYnMuZm9yRWFjaChmdW5jdGlvbiAodGFiLCBpbmRleCkge1xuICAgIHRhYi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgYWN0aXZhdGVUYWIoaW5kZXgpO1xuICAgICAgaW5pdFN3aXBlckZvclBhbmVsKHBhbmVsc1tpbmRleF0pO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBJbml0aWFsaXplIGZpcnN0IHRhYiBhbmQgaXRzIHN3aXBlclxuICBhY3RpdmF0ZVRhYigwKTtcbiAgaW5pdFN3aXBlckZvclBhbmVsKHBhbmVsc1swXSk7XG4gIHVwZGF0ZVRhYkJhcigwKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHJlc2l6ZVRpbWVyKTtcbiAgICByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoaGFuZGxlUmVzaXplLCAxNTApO1xuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgIHVwZGF0ZVRhYkJhcihhY3RpdmVJbmRleCk7XG4gIH0pO1xufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzLXByb2R1Y3QtdGFicy5zLXByb2R1Y3QtdGFic1wiKTtcbiAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc2VjdGlvbikge1xuICAgIGluaXRQcm9kdWN0VGFicyhzZWN0aW9uKTtcbiAgfSk7XG59KTtcblxufSx7fV19LHt9LFsxXSlcblxuIl19
