{% assign video = block.settings.video %}
{% assign poster = block.settings.poster %}
{% assign image = block.settings.image %}
{% assign fallback_image = poster | default: image %}

<div class="video-review">
  {% if video != blank %}
    {% assign poster_url = poster | default: video.preview_image | image_url: width: 1600 %}
    {% assign video_id = 'video-reviews__review-video-' | append: block.id %}

    <div class="video-review__video media-container" data-type="video" data-video-id="{{ video_id }}">

      {{ video | video_tag: image_size: '400x', poster: poster_url, preload: 'metadata', id: video_id }}

      <button type="button" class="video-reviews__play-button" aria-label="Play video">
        <svg width="54" height="54" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M24.2871 34.5718L34.0875 28.2763C34.569 27.9707 34.8098 27.546 34.8098 27.0023C34.8098 26.4585 34.569 26.0323 34.0875 25.7237L24.2871 19.4282C23.7823 19.0821 23.2644 19.0543 22.7334 19.3449C22.2028 19.6356 21.9375 20.0888 21.9375 20.7045V33.2955C21.9375 33.9112 22.2028 34.3644 22.7334 34.6551C23.2644 34.9457 23.7823 34.9179 24.2871 34.5718ZM27.0039 48.375C24.0474 48.375 21.2685 47.814 18.6671 46.692C16.0657 45.57 13.803 44.0473 11.8789 42.1239C9.95475 40.2006 8.43131 37.9387 7.30856 35.3385C6.18619 32.7382 5.625 29.9601 5.625 27.0039C5.625 24.0474 6.186 21.2685 7.308 18.6671C8.43 16.0657 9.95269 13.803 11.8761 11.8789C13.7994 9.95475 16.0613 8.43131 18.6615 7.30856C21.2618 6.18619 24.0399 5.625 26.9961 5.625C29.9526 5.625 32.7315 6.186 35.3329 7.308C37.9342 8.43 40.197 9.95269 42.1211 11.8761C44.0452 13.7994 45.5687 16.0613 46.6914 18.6615C47.8138 21.2618 48.375 24.0399 48.375 26.9961C48.375 29.9526 47.814 32.7315 46.692 35.3329C45.57 37.9342 44.0473 40.197 42.1239 42.1211C40.2006 44.0452 37.9387 45.5687 35.3385 46.6914C32.7382 47.8138 29.9601 48.375 27.0039 48.375ZM27 45C32.025 45 36.2812 43.2562 39.7687 39.7687C43.2562 36.2812 45 32.025 45 27C45 21.975 43.2562 17.7188 39.7687 14.2312C36.2812 10.7438 32.025 9 27 9C21.975 9 17.7188 10.7438 14.2312 14.2312C10.7438 17.7188 9 21.975 9 27C9 32.025 10.7438 36.2812 14.2312 39.7687C17.7188 43.2562 21.975 45 27 45Z" fill="white"/>
        </svg>
      </button>
    </div>

  {% elsif fallback_image != blank %}
    <div class="video-review__image media-container" data-type="image">
      <img
        src="{{ fallback_image | image_url: width: 800 }}"
        srcset="{{ fallback_image | image_url: width: 400 }} 400w, {{ fallback_image | image_url: width: 800 }} 800w, {{ fallback_image | image_url: width: 1200 }} 1200w"
        sizes="(min-width: 1000px) 25vw, (min-width: 750px) 33vw, 50vw"
        alt="{{ fallback_image.alt | default: '' }}"
        loading="lazy"
      >
    </div>
  {% endif %}
</div>
