<div class="carousel-home">
  <div class="carousel-home__container">
      {% if section.settings.heading != blank %}
          <h2 class="carousel-home__title">{{- section.settings.heading -}}</h2>
      {% endif %}
      <div class="carousel-home__grid">
          <button aria-label="prev" class="carousel-controll carousel-controll__prev">
            <svg aria-hidden="true" focusable="false" fill="none" width="16" class="icon icon--direction-aware" viewBox="0 0 16 18">
              <path d="M11 1 3 9l8 8" stroke="currentColor" stroke-linecap="square"></path>
            </svg>
          </button>
          <div class="carousel-swiper swiper">
              <div class="carousel-wrapper swiper-wrapper">
                  {% for block in section.blocks %}
                      {%- liquid
                          assign heading = block.settings.heading
                          assign info = block.settings.info
                          assign product = block.settings.product
                          assign name_btn = block.settings.name_btn
                          assign page_link = block.settings.url_page
                      -%}
                      <div class="carousel-slide swiper-slide">
                          <div class="carousel-slide_wrapper">
                              <div class="carousel-slide__flex">
                                  <h3 class="carousel-slide__title">{{- heading -}}</h3>
                                  <div class="carousel-slide__content">
                                      <p class="carousel-slide__info">{{- info -}}</p>
                                      {% if product.featured_image != blank %}
                                          <div class="carousel-slide__image">
                                              {{
                                              product.featured_image | image_url: width: master | image_tag: widths: '150',
                                              alt: product.featured_image.alt,
                                              loading: 'lazy'
                                              }}
                                          </div>
                                      {% endif %}
                                  </div>
                              </div>
                              {% if page_link != blank %}
                                  <a class="carousel-slide__link" href="{{ page_link }}"
                                     title="{{ product.title }}">{{- name_btn -}}</a>
                              {% elsif name_btn != blank %}
                                  <a class="carousel-slide__link" href="{{ product.url }}"
                                     title="{{ product.title }}">{{- name_btn -}}</a>
                              {% endif %}
                          </div>
                          {% if forloop.last %}
                              <div class="carousel-slide-line carousel-slide-line-last"></div>
                          {%- else -%}
                              <div class="carousel-slide-line"></div>
                          {% endif %}
                      </div>
                  {% endfor %}
              </div>
          </div>
          <div class="carousel-pagination"></div>
          <button aria-label="next" class="carousel-controll carousel-controll__next">
            <svg aria-hidden="true" focusable="false" fill="none" width="16" class="icon icon--direction-aware" viewBox="0 0 16 18">
              <path d="m5 17 8-8-8-8" stroke="currentColor" stroke-linecap="square"></path>
            </svg>
          </button>
      </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
      const carouselSwiper = new Swiper('.carousel-swiper', {
          loop: false,
          spaceBetween: 11,
          navigation: {
            nextEl: '.carousel-controll__next',
            prevEl: '.carousel-controll__prev',
          },
          breakpoints: {
              0: {
                  slidesPerView: 1.36
              },
              769: {
                  slidesPerView: 2.36
              },
              1200: {
                  slidesPerView: 3.36
              }
          },
          pagination: {
              el: '.carousel-pagination',
              clickable: true
          }
      });
  });
</script>

{% schema %}
{
"name": "Carousel home",
"blocks": [
  {
    "type": "slide",
    "name": "Slide",
    "settings": [
      {
        "type": "paragraph",
        "content": "To display the slide, you need to fill in all the fields"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading"
      },
      {
        "type": "text",
        "id": "info",
        "label": "Information"
      },
      {
        "type": "url",
        "id": "url_page",
        "label": "Page "
      },
      {
        "type": "product",
        "id": "product",
        "label": "Product"
      },
      {
        "type": "text",
        "id": "name_btn",
        "label": "Name for the button"
      }
    ]
  }
],
"settings": [
  {
    "type": "text",
    "id": "heading",
    "label": "Heading",
    "default": "BE YOUR OWN MUSE"
  }
],
"presets": [
  {
    "name": "Carousel home"
  }
]
}
{% endschema %}

